import{g as L,p as I,a as K,d as g,n as M,b as k,m as G,j as z,K as re,Z as B,aJ as W,aK as se,aL as ae,aM as oe,ah as le,ax as D,ab as A,aC as ie,T as ue,X as T,aN as ce,D as de,ay as J,S as ge,s as _,i as ve,C as P,ak as me,O as fe,a4 as be,t as ye,A as E,c as d,F as Se,M as _e,a6 as Ce}from"./index-DbbwcS8I.js";import{u as he,m as ke}from"./dimensions-5D4Bb3gD.js";const je=(e,t)=>{const r=e.__vccOpts||e;for(const[n,l]of t)r[n]=l;return r};function ze(e){return{aspectStyles:z(()=>{const t=Number(e.aspectRatio);return t?{paddingBottom:String(1/t*100)+"%"}:void 0})}}const X=I({aspectRatio:[String,Number],contentClass:null,inline:Boolean,...G(),...ke()},"VResponsive"),q=L()({name:"VResponsive",props:X(),setup(e,t){let{slots:r}=t;const{aspectStyles:n}=ze(e),{dimensionStyles:l}=he(e);return K(()=>g("div",{class:k(["v-responsive",{"v-responsive--inline":e.inline},e.class]),style:M([l.value,e.style])},[g("div",{class:"v-responsive__sizer",style:M(n.value)},null),r.additional?.(),r.default&&g("div",{class:k(["v-responsive__content",e.contentClass])},[r.default()])])),{}}});function Z(e){return re(()=>{const{class:t,style:r}=Re(e);return{colorClasses:t,colorStyles:r}})}function Oe(e){const{colorClasses:t,colorStyles:r}=Z(()=>({text:B(e)}));return{textColorClasses:t,textColorStyles:r}}function Ie(e){const{colorClasses:t,colorStyles:r}=Z(()=>({background:B(e)}));return{backgroundColorClasses:t,backgroundColorStyles:r}}function Re(e){const t=B(e),r=[],n={};if(t.background)if(W(t.background)){if(n.backgroundColor=t.background,!t.text&&se(t.background)){const l=ae(t.background);if(l.a==null||l.a===1){const i=oe(l);n.color=i,n.caretColor=i}}}else r.push(`bg-${t.background}`);return t.text&&(W(t.text)?(n.color=t.text,n.caretColor=t.text):r.push(`text-${t.text}`)),{class:r,style:n}}const xe=I({rounded:{type:[Boolean,Number,String],default:void 0},tile:Boolean},"rounded");function Pe(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:le();return{roundedClasses:z(()=>{const n=D(e)?e.value:e.rounded,l=D(e)?!1:e.tile,i=[];if(l||n===!1)i.push("rounded-0");else if(n===!0||n==="")i.push(`${t}--rounded`);else if(typeof n=="string"||n===0)for(const v of String(n).split(" "))i.push(`rounded-${v}`);return i})}}const Te=I({transition:{type:null,default:"fade-transition",validator:e=>e!==!0}},"transition"),h=(e,t)=>{let{slots:r}=t;const{transition:n,disabled:l,group:i,...v}=e,{component:m=i?ie:ue,...b}=A(n)?n:{};let s;return A(n)?s=T(b,ce({disabled:l,group:i}),v):s=T({name:l||!n?"":n},v),de(m,s,r)};function Be(e,t){if(!J)return;const r=t.modifiers||{},n=t.value,{handler:l,options:i}=typeof n=="object"?n:{handler:n,options:{}},v=new IntersectionObserver(function(){let m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],b=arguments.length>1?arguments[1]:void 0;const s=e._observe?.[t.instance.$.uid];if(!s)return;const o=m.some(f=>f.isIntersecting);l&&(!r.quiet||s.init)&&(!r.once||o||s.init)&&l(o,m,b),o&&r.once?Q(e,t):s.init=!0},i);e._observe=Object(e._observe),e._observe[t.instance.$.uid]={init:!1,observer:v},v.observe(e)}function Q(e,t){const r=e._observe?.[t.instance.$.uid];r&&(r.observer.unobserve(e),delete e._observe[t.instance.$.uid])}const H={mounted:Be,unmounted:Q},Ve=I({absolute:Boolean,alt:String,cover:Boolean,color:String,draggable:{type:[Boolean,String],default:void 0},eager:Boolean,gradient:String,lazySrc:String,options:{type:Object,default:()=>({root:void 0,rootMargin:void 0,threshold:void 0})},sizes:String,src:{type:[String,Object],default:""},crossorigin:String,referrerpolicy:String,srcset:String,position:String,...X(),...G(),...xe(),...Te()},"VImg"),$e=L()({name:"VImg",directives:{vIntersect:H},props:Ve(),emits:{loadstart:e=>!0,load:e=>!0,error:e=>!0},setup(e,t){let{emit:r,slots:n}=t;const{backgroundColorClasses:l,backgroundColorStyles:i}=Ie(()=>e.color),{roundedClasses:v}=Pe(e),m=ge("VImg"),b=_(""),s=ve(),o=_(e.eager?"loading":"idle"),f=_(),C=_(),u=z(()=>e.src&&typeof e.src=="object"?{src:e.src.src,srcset:e.srcset||e.src.srcset,lazySrc:e.lazySrc||e.src.lazySrc,aspect:Number(e.aspectRatio||e.src.aspect||0)}:{src:e.src,srcset:e.srcset,lazySrc:e.lazySrc,aspect:Number(e.aspectRatio||0)}),y=z(()=>u.value.aspect||f.value/C.value||0);P(()=>e.src,()=>{R(o.value!=="idle")}),P(y,(a,c)=>{!a&&c&&s.value&&S(s.value)}),me(()=>R());function R(a){if(!(e.eager&&a)&&!(J&&!a&&!e.eager)){if(o.value="loading",u.value.lazySrc){const c=new Image;c.src=u.value.lazySrc,S(c,null)}u.value.src&&fe(()=>{r("loadstart",s.value?.currentSrc||u.value.src),setTimeout(()=>{if(!m.isUnmounted)if(s.value?.complete){if(s.value.naturalWidth||w(),o.value==="error")return;y.value||S(s.value,null),o.value==="loading"&&V()}else y.value||S(s.value),N()})})}}function V(){m.isUnmounted||(N(),S(s.value),o.value="loaded",r("load",s.value?.currentSrc||u.value.src))}function w(){m.isUnmounted||(o.value="error",r("error",s.value?.currentSrc||u.value.src))}function N(){const a=s.value;a&&(b.value=a.currentSrc||a.src)}let x=-1;be(()=>{clearTimeout(x)});function S(a){let c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;const $=()=>{if(clearTimeout(x),m.isUnmounted)return;const{naturalHeight:F,naturalWidth:U}=a;F||U?(f.value=U,C.value=F):!a.complete&&o.value==="loading"&&c!=null?x=window.setTimeout($,c):(a.currentSrc.endsWith(".svg")||a.currentSrc.startsWith("data:image/svg+xml"))&&(f.value=1,C.value=1)};$()}const j=ye(()=>({"v-img__img--cover":e.cover,"v-img__img--contain":!e.cover})),Y=()=>{if(!u.value.src||o.value==="idle")return null;const a=g("img",{class:k(["v-img__img",j.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:u.value.src,srcset:u.value.srcset,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable,sizes:e.sizes,ref:s,onLoad:V,onError:w},null),c=n.sources?.();return d(h,{transition:e.transition,appear:!0},{default:()=>[E(c?g("picture",{class:"v-img__picture"},[c,a]):a,[[Ce,o.value==="loaded"]])]})},p=()=>d(h,{transition:e.transition},{default:()=>[u.value.lazySrc&&o.value!=="loaded"&&g("img",{class:k(["v-img__img","v-img__img--preload",j.value]),style:{objectPosition:e.position},crossorigin:e.crossorigin,src:u.value.lazySrc,alt:e.alt,referrerpolicy:e.referrerpolicy,draggable:e.draggable},null)]}),ee=()=>n.placeholder?d(h,{transition:e.transition,appear:!0},{default:()=>[(o.value==="loading"||o.value==="error"&&!n.error)&&g("div",{class:"v-img__placeholder"},[n.placeholder()])]}):null,te=()=>n.error?d(h,{transition:e.transition,appear:!0},{default:()=>[o.value==="error"&&g("div",{class:"v-img__error"},[n.error()])]}):null,ne=()=>e.gradient?g("div",{class:"v-img__gradient",style:{backgroundImage:`linear-gradient(${e.gradient})`}},null):null,O=_(!1);{const a=P(y,c=>{c&&(requestAnimationFrame(()=>{requestAnimationFrame(()=>{O.value=!0})}),a())})}return K(()=>{const a=q.filterProps(e);return E(d(q,T({class:["v-img",{"v-img--absolute":e.absolute,"v-img--booting":!O.value},l.value,v.value,e.class],style:[{width:_e(e.width==="auto"?f.value:e.width)},i.value,e.style]},a,{aspectRatio:y.value,"aria-label":e.alt,role:e.alt?"img":void 0}),{additional:()=>g(Se,null,[d(Y,null,null),d(p,null,null),d(ne,null,null),d(ee,null,null),d(te,null,null)]),default:n.default}),[[H,{handler:R,options:e.options},null,{once:!0}]])}),{currentSrc:b,image:s,state:o,naturalWidth:f,naturalHeight:C}}});export{H as I,h as M,$e as V,je as _,xe as a,Pe as b,Oe as c,Z as d,Te as m,Ie as u};
